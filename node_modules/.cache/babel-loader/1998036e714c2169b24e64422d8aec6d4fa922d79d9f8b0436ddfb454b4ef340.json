{"ast":null,"code":"// import React, { useEffect, useState } from 'react'\n// import { useNavigate } from 'react-router-dom'\n// import { handleSuccess } from '../utils'\n// import CalendarView from './CalendarView'\n// import './Home.css'\n\n// const API_URL = 'http://localhost:8080/api/bookings'\n\n// const Home = () => {\n//   const navigate = useNavigate()\n\n//   const [loggedInUser, setLoggedInUser] = useState('')\n//   const [bookings, setBookings] = useState([])\n//   const [selectedBooking, setSelectedBooking] = useState(null)\n\n//   const loggedInUserId = localStorage.getItem('userId')\n\n//   const [formData, setFormData] = useState({\n//     professor: '',\n//     department: '',\n//     school: '',\n//     room: 'Room 101',\n//     day: '',\n//     startTime: '',\n//     endTime: ''\n//   })\n\n//   /* =======================\n//      LOAD USER + BOOKINGS\n//   ======================= */\n//   useEffect(() => {\n//     setLoggedInUser(localStorage.getItem('handleLogout'))\n//     fetchBookings()\n//   }, [])\n\n//   /* =======================\n//      FETCH BOOKINGS\n//   ======================= */\n//   const fetchBookings = async () => {\n//     try {\n//       const res = await fetch(API_URL, {\n//         headers: {\n//           Authorization: `Bearer ${localStorage.getItem('token')}`\n//         }\n//       })\n//       const data = await res.json()\n//       setBookings(data)\n//     } catch (err) {\n//       console.error('Failed to load bookings', err)\n//     }\n//   }\n\n//   /* =======================\n//      LOGOUT\n//   ======================= */\n//   const handleLogout = () => {\n//     localStorage.removeItem('token')\n//     localStorage.removeItem('handleLogout')\n//     localStorage.removeItem('userId')\n//     handleSuccess('User Logged Out')\n//     setTimeout(() => navigate('/login'), 1000)\n//   }\n\n//   /* =======================\n//      FORM HANDLING\n//   ======================= */\n//   const handleChange = (e) => {\n//     setFormData({ ...formData, [e.target.name]: e.target.value })\n//   }\n\n//   /* =======================\n//      CREATE BOOKING\n//   ======================= */\n//   const handleSubmit = async (e) => {\n//     e.preventDefault()\n\n//     try {\n//       const res = await fetch(API_URL, {\n//         method: 'POST',\n//         headers: {\n//           'Content-Type': 'application/json',\n//           Authorization: `Bearer ${localStorage.getItem('token')}`\n//         },\n//         body: JSON.stringify(formData)\n//       })\n\n//       const data = await res.json()\n\n//       if (!data.success) {\n//         alert(data.message)\n//         return\n//       }\n\n//       handleSuccess('Booking Confirmed')\n//       await fetchBookings()\n\n//       setFormData({\n//         professor: '',\n//         department: '',\n//         school: '',\n//         room: 'Room 101',\n//         day: '',\n//         startTime: '',\n//         endTime: ''\n//       })\n\n//     } catch (err) {\n//       console.error('Booking failed', err)\n//     }\n//   }\n\n//   /* =======================\n//      DELETE BOOKING (NEW)\n//   ======================= */\n//   const handleDeleteBooking = async (bookingId) => {\n//     const confirmDelete = window.confirm(\n//       'Are you sure you want to delete this meeting?'\n//     )\n//     if (!confirmDelete) return\n\n//     try {\n//       const res = await fetch(`${API_URL}/${bookingId}`, {\n//         method: 'DELETE',\n//         headers: {\n//           Authorization: `Bearer ${localStorage.getItem('token')}`\n//         }\n//       })\n\n//       const data = await res.json()\n\n//       if (!data.success) {\n//         alert(data.message)\n//         return\n//       }\n\n//       handleSuccess('Booking deleted successfully')\n//       setSelectedBooking(null)\n//       fetchBookings()\n\n//     } catch (err) {\n//       console.error('Delete failed', err)\n//     }\n//   }\n\n//   /* =======================\n//      GRID CLICK / DRAG\n//   ======================= */\n//   const handleCellSelect = (day, startTime, endTime) => {\n//     setFormData(prev => ({\n//       ...prev,\n//       day,\n//       startTime,\n//       endTime: endTime || prev.endTime,\n//       room: 'Room 101'\n//     }))\n//   }\n\n//   return (\n//     <>\n//       {/* NAVBAR */}\n//       <div className=\"navbar\">\n//         <div className=\"nav-title\">Conference Room Booking System</div>\n//         <div className=\"nav-center\">DEPARTMENT OF COMPUTER APPLICATION</div>\n//         <div className=\"nav-right\">\n//           <span className=\"nav-user\">Welcome {loggedInUser}</span>\n//           <button className=\"logout-btn\" onClick={handleLogout}>Logout</button>\n//         </div>\n//       </div>\n\n//       {/* PAGE CONTENT */}\n//       <main className=\"page-content\">\n//         <div className=\"dashboard\">\n\n//           {/* BOOKING FORM */}\n//           <div className=\"card booking-card\">\n//             <h3>Book Conference Room (101)</h3>\n\n//             <form onSubmit={handleSubmit} className=\"booking-form\">\n//               <input name=\"professor\" placeholder=\"Professor Name\"\n//                 value={formData.professor} onChange={handleChange} required />\n\n//               <input name=\"department\" placeholder=\"Department\"\n//                 value={formData.department} onChange={handleChange} required />\n\n//               <input name=\"school\" placeholder=\"School\"\n//                 value={formData.school} onChange={handleChange} required />\n\n//               <input value=\"Room 101\" disabled />\n\n//               <select name=\"day\" value={formData.day} onChange={handleChange} required>\n//                 <option value=\"\">Select Day</option>\n//                 <option>Monday</option><option>Tuesday</option>\n//                 <option>Wednesday</option><option>Thursday</option>\n//                 <option>Friday</option><option>Saturday</option>\n//                 <option>Sunday</option>\n//               </select>\n\n//               <select name=\"startTime\" value={formData.startTime} onChange={handleChange} required>\n//                 <option value=\"\">Start Time</option>\n//                 <option>08:00</option><option>09:00</option>\n//                 <option>09:50</option><option>10:40</option>\n//                 <option>11:30</option><option>12:20</option>\n//                 <option>14:00</option><option>15:00</option>\n//                 <option>16:00</option>\n//               </select>\n\n//               <select name=\"endTime\" value={formData.endTime} onChange={handleChange} required>\n//                 <option value=\"\">End Time</option>\n//                 <option>09:00</option><option>09:50</option>\n//                 <option>10:40</option><option>11:30</option>\n//                 <option>12:20</option><option>14:00</option>\n//                 <option>15:00</option><option>16:00</option>\n//                 <option>17:00</option>\n//               </select>\n\n//               <button type=\"submit\">Confirm Booking</button>\n//             </form>\n//           </div>\n\n//           {/* CALENDAR */}\n//           <div className=\"card calendar-card\">\n//             <h3>Weekly Schedule</h3>\n//             <CalendarView\n//               bookings={bookings}\n//               onBookingClick={setSelectedBooking}\n//               onCellSelect={handleCellSelect}\n//             />\n//           </div>\n\n//         </div>\n//       </main>\n\n//       {/* BOOKING DETAILS MODAL */}\n//       {selectedBooking && (\n//         <div className=\"modal-overlay\">\n//           <div className=\"modal\">\n//             <h3>Meeting Details</h3>\n//             <p><b>Professor:</b> {selectedBooking.professor}</p>\n//             <p><b>Department:</b> {selectedBooking.department}</p>\n//             <p><b>School:</b> {selectedBooking.school}</p>\n//             <p><b>Room:</b> Room 101</p>\n//             <p><b>Day:</b> {selectedBooking.day}</p>\n//             <p><b>Time:</b> {selectedBooking.startTime} â€“ {selectedBooking.endTime}</p>\n\n//             {/* ðŸ”¥ DELETE ONLY IF OWNER */}\n//             {selectedBooking.userId === loggedInUserId && (\n//               <button\n//                 className=\"delete-btn\"\n//                 onClick={() => handleDeleteBooking(selectedBooking._id)}\n//                 style={{ background: '#e63946', color: 'white', marginRight: '10px' }}\n//               >\n//                 Delete Meeting\n//               </button>\n//             )}\n\n//             <button onClick={() => setSelectedBooking(null)}>Close</button>\n//           </div>\n//         </div>\n//       )}\n//     </>\n//   )\n// }\n\n// export default Home","map":{"version":3,"names":[],"sources":["E:/Auth-Mern-App/frontend/src/pages/Home.js"],"sourcesContent":["// import React, { useEffect, useState } from 'react'\r\n// import { useNavigate } from 'react-router-dom'\r\n// import { handleSuccess } from '../utils'\r\n// import CalendarView from './CalendarView'\r\n// import './Home.css'\r\n\r\n// const API_URL = 'http://localhost:8080/api/bookings'\r\n\r\n// const Home = () => {\r\n//   const navigate = useNavigate()\r\n\r\n//   const [loggedInUser, setLoggedInUser] = useState('')\r\n//   const [bookings, setBookings] = useState([])\r\n//   const [selectedBooking, setSelectedBooking] = useState(null)\r\n\r\n//   const loggedInUserId = localStorage.getItem('userId')\r\n\r\n//   const [formData, setFormData] = useState({\r\n//     professor: '',\r\n//     department: '',\r\n//     school: '',\r\n//     room: 'Room 101',\r\n//     day: '',\r\n//     startTime: '',\r\n//     endTime: ''\r\n//   })\r\n\r\n//   /* =======================\r\n//      LOAD USER + BOOKINGS\r\n//   ======================= */\r\n//   useEffect(() => {\r\n//     setLoggedInUser(localStorage.getItem('handleLogout'))\r\n//     fetchBookings()\r\n//   }, [])\r\n\r\n//   /* =======================\r\n//      FETCH BOOKINGS\r\n//   ======================= */\r\n//   const fetchBookings = async () => {\r\n//     try {\r\n//       const res = await fetch(API_URL, {\r\n//         headers: {\r\n//           Authorization: `Bearer ${localStorage.getItem('token')}`\r\n//         }\r\n//       })\r\n//       const data = await res.json()\r\n//       setBookings(data)\r\n//     } catch (err) {\r\n//       console.error('Failed to load bookings', err)\r\n//     }\r\n//   }\r\n\r\n//   /* =======================\r\n//      LOGOUT\r\n//   ======================= */\r\n//   const handleLogout = () => {\r\n//     localStorage.removeItem('token')\r\n//     localStorage.removeItem('handleLogout')\r\n//     localStorage.removeItem('userId')\r\n//     handleSuccess('User Logged Out')\r\n//     setTimeout(() => navigate('/login'), 1000)\r\n//   }\r\n\r\n//   /* =======================\r\n//      FORM HANDLING\r\n//   ======================= */\r\n//   const handleChange = (e) => {\r\n//     setFormData({ ...formData, [e.target.name]: e.target.value })\r\n//   }\r\n\r\n//   /* =======================\r\n//      CREATE BOOKING\r\n//   ======================= */\r\n//   const handleSubmit = async (e) => {\r\n//     e.preventDefault()\r\n\r\n//     try {\r\n//       const res = await fetch(API_URL, {\r\n//         method: 'POST',\r\n//         headers: {\r\n//           'Content-Type': 'application/json',\r\n//           Authorization: `Bearer ${localStorage.getItem('token')}`\r\n//         },\r\n//         body: JSON.stringify(formData)\r\n//       })\r\n\r\n//       const data = await res.json()\r\n\r\n//       if (!data.success) {\r\n//         alert(data.message)\r\n//         return\r\n//       }\r\n\r\n//       handleSuccess('Booking Confirmed')\r\n//       await fetchBookings()\r\n\r\n//       setFormData({\r\n//         professor: '',\r\n//         department: '',\r\n//         school: '',\r\n//         room: 'Room 101',\r\n//         day: '',\r\n//         startTime: '',\r\n//         endTime: ''\r\n//       })\r\n\r\n//     } catch (err) {\r\n//       console.error('Booking failed', err)\r\n//     }\r\n//   }\r\n\r\n//   /* =======================\r\n//      DELETE BOOKING (NEW)\r\n//   ======================= */\r\n//   const handleDeleteBooking = async (bookingId) => {\r\n//     const confirmDelete = window.confirm(\r\n//       'Are you sure you want to delete this meeting?'\r\n//     )\r\n//     if (!confirmDelete) return\r\n\r\n//     try {\r\n//       const res = await fetch(`${API_URL}/${bookingId}`, {\r\n//         method: 'DELETE',\r\n//         headers: {\r\n//           Authorization: `Bearer ${localStorage.getItem('token')}`\r\n//         }\r\n//       })\r\n\r\n//       const data = await res.json()\r\n\r\n//       if (!data.success) {\r\n//         alert(data.message)\r\n//         return\r\n//       }\r\n\r\n//       handleSuccess('Booking deleted successfully')\r\n//       setSelectedBooking(null)\r\n//       fetchBookings()\r\n\r\n//     } catch (err) {\r\n//       console.error('Delete failed', err)\r\n//     }\r\n//   }\r\n\r\n//   /* =======================\r\n//      GRID CLICK / DRAG\r\n//   ======================= */\r\n//   const handleCellSelect = (day, startTime, endTime) => {\r\n//     setFormData(prev => ({\r\n//       ...prev,\r\n//       day,\r\n//       startTime,\r\n//       endTime: endTime || prev.endTime,\r\n//       room: 'Room 101'\r\n//     }))\r\n//   }\r\n\r\n//   return (\r\n//     <>\r\n//       {/* NAVBAR */}\r\n//       <div className=\"navbar\">\r\n//         <div className=\"nav-title\">Conference Room Booking System</div>\r\n//         <div className=\"nav-center\">DEPARTMENT OF COMPUTER APPLICATION</div>\r\n//         <div className=\"nav-right\">\r\n//           <span className=\"nav-user\">Welcome {loggedInUser}</span>\r\n//           <button className=\"logout-btn\" onClick={handleLogout}>Logout</button>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {/* PAGE CONTENT */}\r\n//       <main className=\"page-content\">\r\n//         <div className=\"dashboard\">\r\n\r\n//           {/* BOOKING FORM */}\r\n//           <div className=\"card booking-card\">\r\n//             <h3>Book Conference Room (101)</h3>\r\n\r\n//             <form onSubmit={handleSubmit} className=\"booking-form\">\r\n//               <input name=\"professor\" placeholder=\"Professor Name\"\r\n//                 value={formData.professor} onChange={handleChange} required />\r\n\r\n//               <input name=\"department\" placeholder=\"Department\"\r\n//                 value={formData.department} onChange={handleChange} required />\r\n\r\n//               <input name=\"school\" placeholder=\"School\"\r\n//                 value={formData.school} onChange={handleChange} required />\r\n\r\n//               <input value=\"Room 101\" disabled />\r\n\r\n//               <select name=\"day\" value={formData.day} onChange={handleChange} required>\r\n//                 <option value=\"\">Select Day</option>\r\n//                 <option>Monday</option><option>Tuesday</option>\r\n//                 <option>Wednesday</option><option>Thursday</option>\r\n//                 <option>Friday</option><option>Saturday</option>\r\n//                 <option>Sunday</option>\r\n//               </select>\r\n\r\n//               <select name=\"startTime\" value={formData.startTime} onChange={handleChange} required>\r\n//                 <option value=\"\">Start Time</option>\r\n//                 <option>08:00</option><option>09:00</option>\r\n//                 <option>09:50</option><option>10:40</option>\r\n//                 <option>11:30</option><option>12:20</option>\r\n//                 <option>14:00</option><option>15:00</option>\r\n//                 <option>16:00</option>\r\n//               </select>\r\n\r\n//               <select name=\"endTime\" value={formData.endTime} onChange={handleChange} required>\r\n//                 <option value=\"\">End Time</option>\r\n//                 <option>09:00</option><option>09:50</option>\r\n//                 <option>10:40</option><option>11:30</option>\r\n//                 <option>12:20</option><option>14:00</option>\r\n//                 <option>15:00</option><option>16:00</option>\r\n//                 <option>17:00</option>\r\n//               </select>\r\n\r\n//               <button type=\"submit\">Confirm Booking</button>\r\n//             </form>\r\n//           </div>\r\n\r\n//           {/* CALENDAR */}\r\n//           <div className=\"card calendar-card\">\r\n//             <h3>Weekly Schedule</h3>\r\n//             <CalendarView\r\n//               bookings={bookings}\r\n//               onBookingClick={setSelectedBooking}\r\n//               onCellSelect={handleCellSelect}\r\n//             />\r\n//           </div>\r\n\r\n//         </div>\r\n//       </main>\r\n\r\n//       {/* BOOKING DETAILS MODAL */}\r\n//       {selectedBooking && (\r\n//         <div className=\"modal-overlay\">\r\n//           <div className=\"modal\">\r\n//             <h3>Meeting Details</h3>\r\n//             <p><b>Professor:</b> {selectedBooking.professor}</p>\r\n//             <p><b>Department:</b> {selectedBooking.department}</p>\r\n//             <p><b>School:</b> {selectedBooking.school}</p>\r\n//             <p><b>Room:</b> Room 101</p>\r\n//             <p><b>Day:</b> {selectedBooking.day}</p>\r\n//             <p><b>Time:</b> {selectedBooking.startTime} â€“ {selectedBooking.endTime}</p>\r\n\r\n//             {/* ðŸ”¥ DELETE ONLY IF OWNER */}\r\n//             {selectedBooking.userId === loggedInUserId && (\r\n//               <button\r\n//                 className=\"delete-btn\"\r\n//                 onClick={() => handleDeleteBooking(selectedBooking._id)}\r\n//                 style={{ background: '#e63946', color: 'white', marginRight: '10px' }}\r\n//               >\r\n//                 Delete Meeting\r\n//               </button>\r\n//             )}\r\n\r\n//             <button onClick={() => setSelectedBooking(null)}>Close</button>\r\n//           </div>\r\n//         </div>\r\n//       )}\r\n//     </>\r\n//   )\r\n// }\r\n\r\n// export default Home\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}